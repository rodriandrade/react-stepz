{"version":3,"file":"index.modern.js","sources":["../src/components/StepProgress.tsx","../src/components/StepProgessBar.tsx","../src/components/Step.tsx"],"sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\r\nimport { StepProgressContextProps, UseStepProgressOptions } from '../models';\r\n\r\nexport const StepProgressContext: React.Context<StepProgressContextProps> = createContext<\r\n  StepProgressContextProps\r\n>({} as StepProgressContextProps);\r\n\r\nexport const StepProgress: React.FC = ({ children }): React.ReactElement => {\r\n  const [isError, setIsError] = useState(false);\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n\r\n  return (\r\n    <StepProgressContext.Provider\r\n      value={{\r\n        isError,\r\n        setIsError,\r\n        currentStep,\r\n        setCurrentStep\r\n      }}\r\n    >\r\n      {children}\r\n    </StepProgressContext.Provider>\r\n  );\r\n};\r\n\r\nexport const withStepProgress = (Component: React.FC) => (): React.ReactElement => (\r\n  <StepProgress>\r\n    <Component />\r\n  </StepProgress>\r\n);\r\n\r\nexport const useStepProgress = ({ steps, startingStep }: UseStepProgressOptions) => {\r\n  const context = React.useContext(StepProgressContext);\r\n  if (context === undefined) {\r\n    throw new Error('useStepProgress must be used within a StepProgress');\r\n  }\r\n\r\n  const { setCurrentStep, currentStep, setIsError } = context;\r\n\r\n  useEffect(() => {\r\n    setCurrentStep(startingStep || 0);\r\n  }, [startingStep]);\r\n\r\n  const stepForward = () => {\r\n    if (currentStep === steps.length - 1) return;\r\n\r\n    const stepValidator = steps[currentStep].validator;\r\n\r\n    if (stepValidator && !stepValidator()) {\r\n      setIsError(true);\r\n    } else {\r\n      setCurrentStep((old) => old + 1);\r\n      setIsError(false);\r\n    }\r\n  };\r\n\r\n  const stepBackwards = () => {\r\n    if (currentStep === 0) return;\r\n    setCurrentStep((old) => old - 1);\r\n    setIsError(false);\r\n  };\r\n\r\n  return {\r\n    stepForward,\r\n    stepBackwards,\r\n    currentStep\r\n  };\r\n};\r\n","import React from 'react';\r\nimport invariant from 'tiny-invariant';\r\nimport { StepProgressContext } from './StepProgress';\r\nimport styles from './styles.module.css';\r\n\r\nimport { StepProgressBarProps } from '../models';\r\n\r\nexport const StepProgressBar = (props: StepProgressBarProps): JSX.Element => {\r\n  const { className, progressClass, stepClass, steps } = props;\r\n\r\n  return (\r\n    <StepProgressContext.Consumer>\r\n      {(context) => {\r\n        invariant(\r\n          Object.keys(context).length > 0,\r\n          'You cannot use a <StepProgressBar> outside a <StepProgess>'\r\n        );\r\n\r\n        const { currentStep, isError } = context;\r\n\r\n        return (\r\n          <div className={`${styles['progress-bar-wrapper']} ${className || ''}`}>\r\n            <ul className={`${styles['step-progress-bar']} ${progressClass || ''}`}>\r\n              {steps.map(function (step, i) {\r\n                return (\r\n                  <li\r\n                    key={i}\r\n                    className={`${styles['progress-step']}${\r\n                      currentStep > i ? ` ${styles.completed} completed` : ''\r\n                    }${i === currentStep ? ` ${styles.current} active` : ''}${\r\n                      i === currentStep && isError ? ` ${styles['has-error']} error` : ''\r\n                    } ${stepClass || ''}`}\r\n                  >\r\n                    {currentStep > i && (\r\n                      <span className={styles['step-icon']}>\r\n                        <svg\r\n                          width=\"1.5rem\"\r\n                          viewBox=\"0 0 13 9\"\r\n                          fill=\"none\"\r\n                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                        >\r\n                          <path d=\"M1 3.5L4.5 7.5L12 1\" stroke=\"white\" strokeWidth=\"1.5\" />\r\n                        </svg>\r\n                      </span>\r\n                    )}\r\n                    {i === currentStep && isError && <span className={styles['step-icon']}>!</span>}\r\n                    {currentStep <= i && (!isError || i !== currentStep) && (\r\n                      <span className={styles['step-index']}>{i + 1}</span>\r\n                    )}\r\n                    <span className={styles['step-label']}>{step.label}</span>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n        );\r\n      }}\r\n    </StepProgressContext.Consumer>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport invariant from 'tiny-invariant';\r\nimport { StepProps } from '../models';\r\nimport { StepProgressContext } from './StepProgress';\r\n\r\nexport const Step: React.FC<StepProps> = ({ step, children }): React.ReactElement => (\r\n  <StepProgressContext.Consumer>\r\n    {(context) => {\r\n      invariant(Object.keys(context).length > 0, 'You cannot use a <Step> outside a <StepProgess>');\r\n\r\n      if (context.currentStep !== step) {\r\n        return;\r\n      }\r\n\r\n      return children;\r\n    }}\r\n  </StepProgressContext.Consumer>\r\n);\r\n"],"names":["StepProgressContext","createContext","StepProgress","children","useState","isError","setIsError","currentStep","setCurrentStep","React","Provider","value","withStepProgress","Component","useStepProgress","steps","startingStep","context","useContext","undefined","Error","useEffect","stepForward","length","stepValidator","validator","old","stepBackwards","StepProgressBar","props","className","progressClass","stepClass","Consumer","invariant","Object","keys","styles","map","step","i","key","completed","current","width","viewBox","fill","xmlns","d","stroke","strokeWidth","label","Step"],"mappings":"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"}